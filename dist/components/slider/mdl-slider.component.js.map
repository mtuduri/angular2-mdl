{"version":3,"file":"mdl-slider.component.js","sourceRoot":"","sources":["../../../src/lib/components/slider/mdl-slider.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Input,\n  forwardRef,\n  ViewChild,\n  Renderer2,\n  ElementRef,\n  NgModule,\n  ViewEncapsulation,\n  ModuleWithProviders\n} from '@angular/core';\nimport {\n  NG_VALUE_ACCESSOR,\n  ControlValueAccessor,\n  FormsModule\n} from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { toBoolean } from '../common/boolean-property';\nimport { noop } from '../common/noop';\nimport { callNative } from '../common/native-support';\n\n\n@Component({\n  selector: 'mdl-slider',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MdlSliderComponent),\n    multi: true\n  }],\n  host: {\n    '[class.mdl-slider__container]': 'true',\n    '(mouseup)': 'onMouseUp($event)',\n    '(mousedown)': 'onMouseDown($event)'\n  },\n  template: `\n    <input class=\"mdl-slider is-upgraded\" \n            type=\"range\" \n            [min]=\"min\" \n            [max]=\"max\" \n            [step]=\"step\" \n            [(ngModel)]=\"value\" \n            [disabled]=\"disabled\"\n            tabindex=\"0\"\n            #input>\n    <div class=\"mdl-slider__background-flex\">\n      <div class=\"mdl-slider__background-lower\" #lower></div>\n      <div class=\"mdl-slider__background-upper\" #uppper></div>\n  </div>\n  `,\n  styles: [\n    `\n    :host {\n        height: 22px;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n    }\n    `\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class MdlSliderComponent implements ControlValueAccessor {\n  private value_: any;\n\n  @Input() public min: number;\n  @Input() public max: number;\n  @Input() public step: number;\n  @ViewChild('lower') public lowerEl: ElementRef;\n  @ViewChild('uppper') public upperEl: ElementRef;\n  @ViewChild('input') public inputEl: ElementRef;\n\n  private _disabled: boolean = false;\n  @Input()\n  get disabled(): boolean { return this._disabled; }\n  set disabled(value) { this._disabled = toBoolean(value); }\n\n  constructor(private renderer: Renderer2, private elRef: ElementRef) {\n  }\n\n  get value(): any { return this.value_; };\n  @Input() set value(v: any) {\n    this.value_ = v;\n    this.updateSliderUI();\n    this.onChangeCallback(v);\n  }\n\n  public writeValue(value: number): void {\n    this.value_ = value;\n    this.updateSliderUI();\n  }\n\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n\n  public registerOnChange(fn: any): void {\n    this.onChangeCallback = fn;\n  }\n\n  public registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  public setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  private updateSliderUI() {\n    var fraction = (this.value_ - this.min) / (this.max - this.min);\n\n    if (fraction === 0){\n      this.renderer.addClass(this.inputEl.nativeElement, 'is-lowest-value');\n    } else {\n      this.renderer.removeClass(this.inputEl.nativeElement, 'is-lowest-value');\n    }\n\n    this.renderer.setStyle(this.lowerEl.nativeElement, 'flex', '' + fraction);\n    this.renderer.setStyle(this.upperEl.nativeElement, 'flex', '' + (1 - fraction));\n  }\n\n  public onMouseUp(event) {\n    event.target.blur();\n  }\n\n  public onMouseDown(event: MouseEvent) {\n    if (event.target !== this.elRef.nativeElement) {\n      return;\n    }\n    // Discard the original event and create a new event that\n    // is on the slider element.\n    event.preventDefault();\n    var newEvent = new MouseEvent('mousedown', {\n      relatedTarget: event.relatedTarget,\n      button: event.button,\n      buttons: event.buttons,\n      clientX: event.clientX,\n      clientY: this.inputEl.nativeElement.getBoundingClientRect().y,\n      screenX: event.screenX,\n      screenY: event.screenY\n    });\n    callNative(this.inputEl.nativeElement, 'dispatchEvent', newEvent);\n  }\n}\n\nconst MDL_SLIDER_DIRECTIVES = [MdlSliderComponent];\n\n@NgModule({\n  imports: [FormsModule, CommonModule],\n  exports: MDL_SLIDER_DIRECTIVES,\n  declarations: MDL_SLIDER_DIRECTIVES,\n})\nexport class MdlSliderModule {\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: MdlSliderModule,\n      providers: []\n    };\n  }\n}\n"]}