{"version":3,"file":"mdl-layout.component.js","sourceRoot":"","sources":["../../../src/lib/components/layout/mdl-layout.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ContentChild,\n  AfterContentInit,\n  OnDestroy,\n  Input,\n  Renderer2,\n  ViewEncapsulation,\n  ElementRef,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n  Optional,\n  Inject,\n  Injectable,\n  InjectionToken, NgZone\n} from '@angular/core';\nimport{ EventManager } from '@angular/platform-browser';\nimport { MdlError } from '../common/mdl-error';\nimport { toBoolean } from '../common/boolean-property';\nimport { toNumber } from '../common/number.property';\nimport { MdlLayoutHeaderComponent } from './mdl-layout-header.component';\nimport { MdlLayoutDrawerComponent } from './mdl-layout-drawer.component';\nimport { MdlLayoutContentComponent } from './mdl-layout-content.component';\nimport { Observable } from 'rxjs';\nimport { BehaviorSubject } from 'rxjs';\n\nconst ESCAPE = 27;\n\nconst STANDARD = 'standard';\nconst WATERFALL = 'waterfall';\nconst SCROLL = 'scroll';\n\n/**\n * The LAYOUT_SCREEN_SIZE_THRESHOLD can be changed at the root module. Just provide a value for this InjectionToken:\n *\n * providers: [\n *  {provide:LAYOUT_SCREEN_SIZE_THRESHOLD, useValue: 768 }\n * ]\n *\n * you also need to change the scss variable to the same value: $layout-screen-size-threshold: 768px.\n *\n * It should be clear that this can only be used if you are using the scss and not the pre compiled css from getmdl.io.\n *\n * @type {InjectionToken}\n */\nexport const LAYOUT_SCREEN_SIZE_THRESHOLD = new InjectionToken<number>('layoutScreenSizeThreshold');\n\nexport class MdLUnsupportedLayoutTypeError extends MdlError {\n  constructor(type: string) {\n      /* istanbul ignore next */\n    super(`Layout type \"${type}\" isn't supported by mdl-layout (allowed: standard, waterfall, scroll).`);\n  }\n}\n\n@Injectable()\nexport class MdlScreenSizeService {\n\n  private sizesSubject: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  private windowMediaQueryListener: Function;\n\n  constructor(\n    ngZone: NgZone,\n    @Optional() @Inject(LAYOUT_SCREEN_SIZE_THRESHOLD) private layoutScreenSizeThreshold: number) {\n\n    // if no value is injected the default size wil be used. same as $layout-screen-size-threshold in scss\n    if (!this.layoutScreenSizeThreshold) {\n      this.layoutScreenSizeThreshold = 1024;\n    }\n\n    // do not try to access the window object if rendered on the server\n    if (typeof window === 'object' && 'matchMedia' in window) {\n\n      let query: MediaQueryList = window.matchMedia(`(max-width: ${this.layoutScreenSizeThreshold}px)`);\n\n      let queryListener = () => {\n        ngZone.run( () => {\n          this.sizesSubject.next(query.matches);\n        });\n      };\n      query.addListener(queryListener);\n      this.windowMediaQueryListener = function() {\n        query.removeListener(queryListener);\n      };\n      // set the initial state\n      this.sizesSubject.next(query.matches);\n\n    }\n  }\n\n  public isSmallScreen(): boolean {\n    return this.sizesSubject.value;\n  }\n\n  public sizes(): Observable<boolean> {\n    return this.sizesSubject.asObservable();\n  }\n\n  destroy(){\n    if (this.windowMediaQueryListener) {\n      this.windowMediaQueryListener();\n      this.windowMediaQueryListener = null;\n    }\n  }\n}\n\n@Component({\n  selector: 'mdl-layout',\n  template: `\n    <div class=\"mdl-layout__container\" [ngClass]=\"{'has-scrolling-header': mode==='scroll'}\">\n     <div class=\"mdl-layout is-upgraded\"\n          [ngClass]=\"{\n          'is-small-screen': isSmallScreen,\n          'mdl-layout--fixed-drawer': isFixedDrawer,\n          'mdl-layout--fixed-header': isFixedHeader,\n          'mdl-layout--fixed-tabs': 'tabs.toArray().length > 0'\n          }\">\n        <ng-content select=\"mdl-layout-header\"></ng-content>\n        <ng-content select=\"mdl-layout-drawer\"></ng-content>\n        <div *ngIf=\"drawer && isNoDrawer==false\" class=\"mdl-layout__drawer-button\" (click)=\"toggleDrawer()\">\n           <mdl-icon>&#xE5D2;</mdl-icon>\n        </div>\n        <ng-content select=\"mdl-layout-content\"></ng-content>\n        <div class=\"mdl-layout__obfuscator\"\n             [ngClass]=\"{'is-visible':isDrawerVisible}\"\n             (click)=\"toggleDrawer()\"\n             (keydown)=\"obfuscatorKeyDown($event)\"></div>\n     </div>\n    </div>\n  `,\n  exportAs: 'mdlLayout',\n  encapsulation: ViewEncapsulation.None\n})\nexport class MdlLayoutComponent implements AfterContentInit, OnDestroy, OnChanges {\n\n  @ContentChild(MdlLayoutHeaderComponent) public header;\n  // will be set to undefined, if not a direct child or not present in 2.0.0 i\n  // n 2.0.1 it is now the grand child drawer again :(\n  @ContentChild(MdlLayoutDrawerComponent) public drawer;\n  @ContentChild(MdlLayoutContentComponent) public content;\n\n  @Input('mdl-layout-mode') public mode: string = STANDARD;\n\n  private _isFixedDrawer: boolean = false;\n  @Input('mdl-layout-fixed-drawer')\n  get isFixedDrawer() { return this._isFixedDrawer; }\n  set isFixedDrawer(value) { this._isFixedDrawer = toBoolean(value); }\n\n  private _isFixedHeader: boolean = false;\n  @Input('mdl-layout-fixed-header')\n  get isFixedHeader() { return this._isFixedHeader; }\n  set isFixedHeader(value) { this._isFixedHeader = toBoolean(value); }\n\n  private _isSeamed: boolean = false;\n  @Input('mdl-layout-header-seamed')\n  get isSeamed() { return this._isSeamed; }\n  set isSeamed(value) { this._isSeamed = toBoolean(value); }\n\n  private _selectedIndex: number = 0;\n  @Input('mdl-layout-tab-active-index')\n  get selectedIndex() { return this._selectedIndex; }\n  set selectedIndex(value) { this._selectedIndex = toNumber(value); }\n\n  private _isNoDrawer: boolean = false;\n  @Input('mdl-layout-no-drawer-button')\n  get isNoDrawer() { return this._isNoDrawer; }\n  set isNoDrawer(value) { this._isNoDrawer = toBoolean(value); }\n\n  @Output('mdl-layout-tab-active-changed') public selectedTabEmitter = new EventEmitter();\n  @Output('mdl-layout-tab-mouseover') public mouseoverTabEmitter = new EventEmitter();\n  @Output('mdl-layout-tab-mouseout') public mouseoutTabEmitter = new EventEmitter();\n\n  @Output('open') public onOpen = new EventEmitter<void>();\n  @Output('close') public onClose = new EventEmitter<void>();\n\n  public isDrawerVisible = false;\n  public isSmallScreen = false;\n\n  private scrollListener: Function;\n\n  constructor(\n    private renderer: Renderer2,\n    private evm: EventManager,\n    private el: ElementRef,\n    private screenSizeService: MdlScreenSizeService) {\n  }\n\n  public ngAfterContentInit() {\n    this.validateMode();\n\n    if (this.header && this.content && this.content.tabs) {\n      this.header.tabs = this.content.tabs;\n      this.updateSelectedTabIndex();\n    }\n\n    // set this.drawer to null, if the drawer is not a direct child if this layout. It may be a drywer of a sub layout.\n    if (this.drawer && !this.drawer.isDrawerDirectChildOf(this)) {\n      this.drawer = null;\n    }\n\n  }\n\n  public ngOnChanges(changes: SimpleChanges): any {\n    if ( changes['selectedIndex'] ) {\n      this.updateSelectedTabIndex();\n    }\n  }\n\n  private updateSelectedTabIndex() {\n    if (this.header && this.header.tabs) {\n      this.header.tabs.forEach( tab => tab.isActive = false);\n      if (this.header.tabs.toArray().length > 0 && this.selectedIndex < this.header.tabs.toArray().length) {\n        this.header.tabs.toArray()[this.selectedIndex].isActive = true;\n      }\n    }\n  }\n\n  private validateMode() {\n    if (this.mode === '') {\n      this.mode = STANDARD;\n    }\n    if ([STANDARD , WATERFALL, SCROLL].indexOf(this.mode) === -1) {\n      throw new MdLUnsupportedLayoutTypeError(this.mode);\n    }\n\n    if (this.header) {\n      // inform the header about the mode\n      this.header.mode = this.mode;\n      this.header.isSeamed = this.isSeamed;\n    }\n\n\n    if (this.content) {\n      this.scrollListener = this.renderer.listen(this.content.el, 'scroll', (e) => {\n         this.onScroll(this.content.el.scrollTop);\n         return true;\n      });\n\n      this.screenSizeService.sizes().subscribe( (isSmall: boolean) => {\n        this.onQueryChange(isSmall);\n      });\n    }\n\n  }\n\n  private onScroll(scrollTop) {\n    if (this.mode !== WATERFALL) {\n      return;\n    }\n\n    if (this.header.isAnimating) {\n      return;\n    }\n\n    let headerVisible = !this.isSmallScreen || this.isFixedHeader;\n    if (scrollTop > 0 && !this.header.isCompact) {\n      this.header.isCompact = true;\n      if (headerVisible) {\n        this.header.isAnimating = true;\n      }\n    } else if (scrollTop <= 0 && this.header.isCompact) {\n      this.header.isCompact = false;\n      if (headerVisible) {\n        this.header.isAnimating = true;\n      }\n    }\n  }\n\n  private onQueryChange(isSmall: boolean) {\n      if (isSmall) {\n        this.isSmallScreen = true;\n      } else {\n        this.isSmallScreen = false;\n        this.closeDrawer();\n      }\n  }\n\n  public toggleDrawer() {\n    this.isDrawerVisible = !this.isDrawerVisible;\n    if (this.drawer) {\n      this.setDrawerVisible(this.isDrawerVisible);\n    }\n  }\n\n  public closeDrawer() {\n    this.isDrawerVisible = false;\n    if (this.drawer) {\n      this.setDrawerVisible(false);\n    }\n  }\n\n  public openDrawer() {\n    this.isDrawerVisible = true;\n    if (this.drawer) {\n      this.setDrawerVisible(true);\n    }\n  }\n\n  private setDrawerVisible(visible: boolean){\n    this.drawer.isDrawerVisible = visible;\n    this.drawer.isDrawerVisible ? this.onOpen.emit() : this.onClose.emit();\n  }\n\n  public obfuscatorKeyDown($event) {\n    if ($event.keyCode === ESCAPE) {\n      this.toggleDrawer();\n    }\n  }\n\n  public ngOnDestroy() {\n    if (this.scrollListener) {\n      this.scrollListener();\n      this.scrollListener = null;\n    }\n  }\n\n  // triggered from mdl-layout-header.component\n  public tabSelected(tab) {\n    let index = this.header.tabs.toArray().indexOf(tab);\n    if (index != this.selectedIndex) {\n      this.selectedIndex = index;\n      this.updateSelectedTabIndex();\n      this.selectedTabEmitter.emit({index: this.selectedIndex});\n    }\n  }\n\n  // triggered from mdl-layout-header.component\n  public onTabMouseover(tab) {\n    let index = this.header.tabs.toArray().indexOf(tab);\n    this.mouseoverTabEmitter.emit({index: index});\n  }\n\n  // triggered from mdl-layout-header.component\n  public onTabMouseout(tab) {\n    let index = this.header.tabs.toArray().indexOf(tab);\n    this.mouseoutTabEmitter.emit({index: index});\n  }\n\n  public closeDrawerOnSmallScreens() {\n    if (this.isSmallScreen && this.isDrawerVisible) {\n      this.closeDrawer();\n    }\n  }\n\n  public openDrawerOnSmallScreens() {\n    if (this.isSmallScreen && !this.isDrawerVisible) {\n      this.openDrawer();\n    }\n  }\n\n  public hasDrawer() {\n    return !!this.drawer;\n  }\n}\n"]}