{"version":3,"file":"mdl-radio.component.js","sourceRoot":"","sources":["../../../src/lib/components/radio/mdl-radio.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    ElementRef,\n    Output,\n    EventEmitter,\n    Renderer2,\n    forwardRef,\n    Input,\n    NgModule,\n    OnInit,\n    Injectable,\n    OnDestroy,\n    ViewEncapsulation,\n    ModuleWithProviders,\n    Optional\n} from '@angular/core';\nimport {\n    NG_VALUE_ACCESSOR,\n    ControlValueAccessor,\n    FormsModule,\n    FormGroupName\n} from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { toBoolean } from '../common/boolean-property';\nimport { toNumber } from '../common/number.property';\nimport { noop } from '../common/noop';\n\n\nconst IS_FOCUSED = 'is-focused';\n\n// Registry for mdl-readio compnents. Is responsible to keep the\n// right state of the radio buttons of a radio group. It would be\n// easier if i had a mdl-radio-group component. but this would be\n// a big braking change.\n@Injectable()\nexport class MdlRadioGroupRegisty {\n\n  private defaultFormGroup  = 'defaultFromGroup';\n  private radioComponents: {radio: MdlRadioComponent, group: FormGroupName | string}[] = [];\n\n  public add(radioComponent: MdlRadioComponent, formGroupName: FormGroupName) {\n    this.radioComponents.push({\n      radio: radioComponent,\n      group: formGroupName || this.defaultFormGroup\n    });\n  }\n\n  public remove(radioComponent: MdlRadioComponent) {\n    this.radioComponents = this.radioComponents.filter( (radioComponentInArray) => {\n      return (radioComponentInArray.radio !== radioComponent);\n    });\n  }\n\n  public select(radioComponent: MdlRadioComponent, formGroupName: FormGroupName) {\n    // unselect every radioComponent that is not the provided radiocomponent\n    // and has the same name and is in teh same group.\n    let groupToTest = formGroupName || this.defaultFormGroup;\n    this.radioComponents.forEach( (component) => {\n      if (component.radio.name === radioComponent.name && component.group === groupToTest) {\n        if (component.radio !== radioComponent) {\n          component.radio.deselect(radioComponent.value);\n        }\n      }\n    });\n  }\n}\n\n/*\n <mdl-radio name=\"group1\" value=\"1\" [(ngModel)]=\"radioOption\">Value 1</mdl-radio>\n */\n\n@Component({\n  selector: 'mdl-radio',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MdlRadioComponent),\n    multi: true\n  }],\n  host: {\n    '(click)': 'onClick()',\n    '[class.mdl-radio]': 'true',\n    '[class.is-upgraded]': 'true',\n    '[class.is-checked]': 'checked',\n    '[class.is-disabled]': 'disabled'\n  },\n  template: `\n  <input type=\"checkbox\" class=\"mdl-radio__button\" \n    [attr.name]=\"name\"\n    (focus)=\"onFocus()\" \n    (blur)=\"onBlur()\"\n    (keyup.space)=\"spaceKeyPress($event)\"\n    [disabled]=\"disabled\"\n    [attr.tabindex]=\"tabindex\"\n    [(ngModel)]=\"checked\">\n  <span class=\"mdl-radio__label\"><ng-content></ng-content></span>\n  <span class=\"mdl-radio__outer-circle\"></span>\n  <span class=\"mdl-radio__inner-circle\"></span>\n  `,\n  encapsulation: ViewEncapsulation.None\n})\nexport class MdlRadioComponent implements ControlValueAccessor, OnInit, OnDestroy {\n\n  @Input() public name: string;\n  @Input() public formControlName: string;\n  @Input() public value: any;\n\n  private _disabled: boolean = false;\n  @Input()\n  get disabled(): boolean { return this._disabled; }\n  set disabled(value) { this._disabled = toBoolean(value); }\n\n  @Input() public tabindex = null;\n\n  @Output() public change: EventEmitter<any> = new EventEmitter<any>();\n\n  public optionValue: any;\n  // the internal state - used to set the underlaying radio button state.\n  public checked = false;\n\n  private el: HTMLElement;\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: () => void = noop;\n\n\n  constructor(\n      private elementRef: ElementRef,\n      private renderer: Renderer2,\n      private radioGroupRegistry: MdlRadioGroupRegisty,\n      @Optional() private formGroupName: FormGroupName) {\n    this.el = elementRef.nativeElement;\n  }\n\n  public ngOnInit() {\n    // we need a name and it must be the same as in the formcontrol.\n    // a radio group without name is useless.\n    this.checkName();\n    // register the radio button - this is the only chance to unselect the\n    // radio button that is no longer active - scope the radio button with it's group\n    // if there is one.\n    this.radioGroupRegistry.add(this, this.formGroupName);\n  }\n\n  public ngOnDestroy() {\n    this.radioGroupRegistry.remove(this);\n  }\n\n  public writeValue(optionValue: any): void {\n    this.optionValue = optionValue;\n    this.updateCheckState();\n  }\n\n  public deselect(value: any) {\n    // called from the registry. the value is the value of the selected radio button\n    // e.g. the radio button get unselected if it isnÃ„t the selected one.\n    this.writeValue(value);\n  }\n\n  public registerOnChange(fn: any): void {\n    // wrap the callback, so that we can call select on the registry\n    this.onChangeCallback = () => {\n      fn(this.value);\n      this.radioGroupRegistry.select(this, this.formGroupName);\n    };\n  }\n\n  public registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  public setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  public onFocus() {\n    this.renderer.addClass(this.el, IS_FOCUSED);\n  }\n\n  public onBlur() {\n    this.renderer.removeClass(this.el, IS_FOCUSED);\n  }\n\n  public onClick() {\n    if (this.disabled) {\n      return;\n    }\n    this.optionValue = this.value;\n    this.updateCheckState();\n    this.onChangeCallback();\n    this.change.emit(this.optionValue);\n  }\n\n  private updateCheckState() {\n    this.checked = this.optionValue === this.value;\n  }\n\n  private checkName(): void {\n    if (this.name && this.formControlName && this.name !== this.formControlName) {\n      this.throwNameError();\n    }\n    if (!this.name && this.formControlName) {\n      this.name = this.formControlName;\n    }\n  }\n\n  private throwNameError(): void {\n    throw new Error(`\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <mdl-radio formControlName=\"food\" name=\"food\"></mdl-radio>\n    `);\n  }\n\n  spaceKeyPress(event) {\n    this.checked = false;//in case of space key is pressed radio button value must remain same\n  }\n}\n\n\n@NgModule({\n  imports: [CommonModule, FormsModule],\n  exports: [MdlRadioComponent],\n  declarations: [MdlRadioComponent]\n})\nexport class MdlRadioModule {\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: MdlRadioModule,\n      providers: [MdlRadioGroupRegisty]\n    };\n  }\n}\n"]}